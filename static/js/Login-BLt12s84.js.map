{"version":3,"file":"Login-BLt12s84.js","sources":["../../../src/assets/api/accountApi.js","../../../src/views/login/Login.vue"],"sourcesContent":["import axios from \"@/assets/api/axios.js\";\n\nconst api = {\n    login: (params) => axios(\"postjson\", \"/login\", params), // 登录\n    register: (params) => axios(\"postjson\", \"/register\", params), // 注册\n};\nexport default api;\n","<template>\n    <div class=\"loginWrap\">\n        <div class=\"loginBox\">\n            <h2>登录</h2>\n            <p class=\"username\">用户名</p>\n            <a-input v-model:value=\"username\" placeholder=\"请输入\" />\n            <p class=\"password\">密码</p>\n            <a-input\n                type=\"password\"\n                v-model:value=\"password\"\n                placeholder=\"请输入\"\n                visible=\"false\"\n            />\n            <div class=\"loginBtn\">\n                <a-button type=\"primary\" block @click=\"loginFn\">登录</a-button>\n                <div class=\"viceBtn\">\n                    <a-button type=\"text\" class=\"register\" @click=\"register\">\n                        注册账号\n                    </a-button>\n                    <a-button\n                        type=\"text\"\n                        class=\"forget\"\n                        @click=\"forget\"\n                        disabled\n                    >\n                        忘记密码？\n                    </a-button>\n                </div>\n            </div>\n        </div>\n        <div class=\"powerby\">\n            <p>Powered by Amy</p>\n            <!--            <p>Version 0.1</p>-->\n            <p>Build Time {{ buildTime }}</p>\n        </div>\n    </div>\n</template>\n<script>\nimport { onMounted, reactive, toRefs } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport accountApi from \"@/assets/api/accountApi\";\nimport { message } from \"ant-design-vue\";\n\nexport default {\n    name: \"Login\",\n    setup() {\n        const router = useRouter();\n        //state\n        const state = reactive({\n            username: import.meta.env.MODE === \"development\" ? \"vipcw\" : \"\", // 用户名\n            password: import.meta.env.MODE === \"development\" ? \"123456\" : \"\", // 密码\n            buildTime: \"\",\n        });\n\n        onMounted(() => {\n            init();\n        });\n\n        const init = () => {\n            state.buildTime = import.meta.env.VITE_APP_BUILDTIME;\n        };\n\n        // 登录\n        const loginFn = async () => {\n            if (state.username === \"\" || state.password === \"\") {\n                message.error(\"请输入用户名和密码！\");\n                return;\n            }\n            let res = await accountApi.login({\n                username: state.username,\n                password: state.password,\n            });\n            // 缓存toekn\n            sessionStorage.setItem(\"uid\", res.data.uid);\n            sessionStorage.setItem(\"token\", res.data.token);\n            message.success(\"登录成功！\");\n            await router.push(\"/center\");\n        };\n\n        // 注册\n        const register = async () => {\n            let res = await accountApi.register({\n                username: state.username,\n                password: state.password,\n            });\n            message.success(\"注册成功！\");\n        };\n\n        // 忘记密码\n        const forget = () => {};\n\n        return {\n            ...toRefs(state),\n            loginFn,\n            register,\n            forget,\n        };\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n.loginWrap {\n    width: 100vw;\n    height: 100vh;\n    background-color: gray;\n    position: relative;\n\n    .loginBox {\n        width: 350px;\n        background-color: white;\n        border-radius: 15px;\n        padding: 30px 15px 15px;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate3d(-50%, -50%, 0);\n\n        .username,\n        .password {\n            margin-bottom: 10px;\n            margin-top: 20px;\n        }\n\n        .loginBtn {\n            margin-top: 20px;\n\n            .viceBtn {\n                margin-top: 10px;\n                display: flex;\n                justify-content: space-between;\n            }\n        }\n    }\n\n    .powerby {\n        position: fixed;\n        right: 10px;\n        bottom: 3px;\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n    }\n}\n</style>\n"],"names":["api","params","axios","_sfc_main","router","useRouter","state","reactive","onMounted","init","loginFn","message","res","accountApi","register","forget","toRefs","_hoisted_1","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_4","_withScopeId","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_11","_hoisted_12","_openBlock","_createElementBlock","_createVNode","_component_a_input","_ctx","$event","_component_a_button","$setup","_toDisplayString"],"mappings":"yLAEA,MAAMA,EAAM,CACR,MAAQC,GAAWC,EAAM,WAAY,SAAUD,CAAM,EACrD,SAAWA,GAAWC,EAAM,WAAY,YAAaD,CAAM,CAC/D,ECsCKE,EAAU,CACX,KAAM,QACN,OAAQ,CACJ,MAAMC,EAASC,IAETC,EAAQC,EAAS,CACnB,SAA6D,GAC7D,SAA8D,GAC9D,UAAW,EAAA,CACd,EAEDC,EAAU,IAAM,CACPC,GAAA,CACR,EAED,MAAMA,EAAO,IAAM,CACfH,EAAM,UAAY,sBAAA,EAIhBI,EAAU,SAAY,CACxB,GAAIJ,EAAM,WAAa,IAAMA,EAAM,WAAa,GAAI,CAChDK,EAAQ,MAAM,YAAY,EAC1B,MACJ,CACI,IAAAC,EAAM,MAAMC,EAAW,MAAM,CAC7B,SAAUP,EAAM,SAChB,SAAUA,EAAM,QAAA,CACnB,EAED,eAAe,QAAQ,MAAOM,EAAI,KAAK,GAAG,EAC1C,eAAe,QAAQ,QAASA,EAAI,KAAK,KAAK,EAC9CD,EAAQ,QAAQ,OAAO,EACjB,MAAAP,EAAO,KAAK,SAAS,CAAA,EAIzBU,EAAW,SAAY,CACf,MAAMD,EAAW,SAAS,CAChC,SAAUP,EAAM,SAChB,SAAUA,EAAM,QAAA,CACnB,EACDK,EAAQ,QAAQ,OAAO,CAAA,EAIrBI,EAAS,IAAM,CAAA,EAEd,MAAA,CACH,GAAGC,EAAOV,CAAK,EACf,QAAAI,EACA,SAAAI,EACA,OAAAC,CAAA,CAER,CACJ,0CAjGSE,EAAA,CAAA,MAAM,aACFC,EAAA,CAAA,MAAM,YACPC,IAAA,IAAAC,EAAW,UAAP,KAAE,EAAA,CAAA,EACNC,EAAAC,EAAA,IAA2BF,EAAA,IAAxB,CAAA,MAAM,YAAW,MAAG,EAAA,CAAA,EAEvBG,EAAAD,EAAA,IAA0BF,EAAA,IAAvB,CAAA,MAAM,YAAW,KAAE,EAAA,CAAA,EAOjBI,EAAA,CAAA,MAAM,gBACyC,IAAE,EAC7CC,EAAA,CAAA,MAAM,eACkD,QAEzD,MAMC,SAED,EAIPC,EAAA,CAAA,MAAM,WACPC,IAAA,IAAAP,EAAqB,SAAlB,iBAAc,EAAA,CAAA,+DA9BzB,OAAAQ,EAAA,EAAAC,EAkCM,MAlCNZ,EAkCM,CAjCFG,EA2BM,MA3BNF,EA2BM,CA1BFC,EACAE,EACAS,EAAsDC,EAAA,CAArC,MAAOC,EAAQ,sCAARC,GAAAD,EAAQ,SAAAC,GAAE,YAAY,yBAC9CV,EACAO,EAKEC,EAAA,CAJE,KAAK,WACG,MAAOC,EAAQ,sCAARC,GAAAD,EAAQ,SAAAC,GACvB,YAAY,MACZ,QAAQ,2BAEZb,EAeM,MAfNI,EAeM,CAdFM,EAA6DI,EAAA,CAAnD,KAAK,UAAU,MAAA,GAAO,QAAOC,EAAO,OAAA,aAAE,IAAE,yBAClDf,EAYM,MAZNK,EAYM,CAXFK,EAEWI,EAAA,CAFD,KAAK,OAAO,MAAM,WAAY,QAAOC,EAAQ,QAAA,aAAE,IAEzD,yBACAL,EAOWI,EAAA,CANP,KAAK,OACL,MAAM,SACL,QAAOC,EAAM,OACd,SAAA,EAAA,aACH,IAED,+BAIZf,EAIM,MAJNM,EAIM,CAHFC,EAEAP,EAAiC,IAAA,KAA9B,cAAWgB,EAAGJ,EAAS,SAAA,EAAA,CAAA,CAAA"}