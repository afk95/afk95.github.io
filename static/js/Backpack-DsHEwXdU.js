import{a as v}from"./axios-3UtZxvnF.js";import{b,I as O,_ as j,n as B,r as L,o as M,x as P,q as U,t as A,c as g,w as m,a as f,F as z,z as E,m as l,A as p,e as D,M as x,f as w,g as c,B as N,i as y,d,p as K,h as V}from"./index-s-0WH2ku.js";import{t as F,a as H}from"./transItemText-DoyWbVnQ.js";import{I as R}from"./Iconfont-D3apMN4H.js";var G={icon:function(n,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zM288 421a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm224 272c-85.5 0-155.6-67.3-160-151.6a8 8 0 018-8.4h48.1c4.2 0 7.8 3.2 8.1 7.4C420 589.9 461.5 629 512 629s92.1-39.1 95.8-88.6c.3-4.2 3.9-7.4 8.1-7.4H664a8 8 0 018 8.4C667.6 625.7 597.5 693 512 693zm176-224a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:t}},{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm376 112h-48.1c-4.2 0-7.8 3.2-8.1 7.4-3.7 49.5-45.3 88.6-95.8 88.6s-92-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4zm-24-112a48 48 0 1096 0 48 48 0 10-96 0z",fill:n}}]}},name:"smile",theme:"twotone"};function $(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(k){return Object.getOwnPropertyDescriptor(t,k).enumerable}))),a.forEach(function(k){J(e,k,t[k])})}return e}function J(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var q=function(n,t){var a=$({},n,t.attrs);return b(O,$({},a,{icon:G}),null)};q.displayName="SmileTwoTone";q.inheritAttrs=!1;const C={getInfo:e=>v("postjson","/getBackpackInfo",e),postEquipItem:e=>v("postjson","/postEquipItem",e),postUnEquipItem:e=>v("postjson","/postUnEquipItem",e),postUseItem:e=>v("postjson","/postUseItem",e),postDissolveItem:e=>v("postjson","/postDissolveItem",e)},Q=[{name:"all",key:"all"},{name:"item",key:"item"},{name:"weapon",key:"weapon"},{name:"armor",key:"armor"},{name:"ornament",key:"ornament"},{name:"mission",key:"mission"}],W={name:"Backpack",components:{Iconfont:R},setup(){const{t:e,locale:n}=B(),t=L({menuList:Q,selectedKeys:["all"],backpack:[]});M(async()=>{r(),await a()});const a=async()=>{let s=await C.getInfo({uid:sessionStorage.getItem("uid"),type:t.selectedKeys[0]});t.backpack=s.data.map(i=>({...i,attr:F(i.attr),typeText:H(i.type),isChoose:!1}))},k=async(s,i)=>{t.backpack[i].isChoose=!t.backpack[i].isChoose},h=P(()=>t.backpack.filter(s=>s.isChoose)),u=async()=>{if(h.value.length===0){D.error("请选中道具！");return}x.confirm({title:`是否分解全部 ${h.value.length}件 道具?`,content:b("div",{style:"color:red;"}),okText:"确定",cancelText:"取消",async onOk(){h.value.forEach(s=>{I(s)})}})},I=async s=>{console.log(s),x.confirm({title:`是否分解 ${s.name}?`,content:b("div",{style:"color:red;"}),okText:"确定",cancelText:"取消",async onOk(){h.value.forEach(i=>{I(i)})}}),await C.postDissolveItem({id:s.id,uid:sessionStorage.getItem("uid")}),await a()},_=async s=>{await C.postEquipItem({id:s.id,uid:sessionStorage.getItem("uid"),type:s.type}),await a()},T=async s=>{await C.postUnEquipItem({id:s.id,uid:sessionStorage.getItem("uid"),type:s.type}),await a()},o=async s=>{await C.postUseItem({id:s.id}),await a()},S=async(s,i,re)=>{t.selectedKeys=[s.key],await a()};U(n,()=>{r()},{deep:!0});const r=()=>{for(let s in t.menuList){let i=e(t.menuList[s].key);t.menuList[s].label=i,t.menuList[s].title=i}};return{...A(t),itemChoose:k,equipItem:_,unEquipItem:T,useItem:o,menuClick:S,SmileTwoTone:q,dissolveItem:I,dissolveAll:u}}},X=e=>(K("data-v-daee3d7a"),e=e(),V(),e),Y={class:"backpack"},Z=y(" 批量分解 "),ee={class:"content"},te=["onClick"],se={class:"name"},ae={class:"attr"},oe=X(()=>f("span",{class:"br"}," - ",-1)),ne={class:"status"},ce=y(" E ");function ie(e,n,t,a,k,h){const u=w("a-button"),I=w("a-menu"),_=w("Iconfont"),T=w("a-result");return c(),g("div",Y,[b(u,{onClick:a.dissolveAll,type:"text",class:"dissolveAll"},{default:m(()=>[Z]),_:1},8,["onClick"]),b(I,{selectedKeys:e.selectedKeys,mode:"horizontal",items:e.menuList,onClick:a.menuClick},null,8,["selectedKeys","items","onClick"]),f("div",ee,[(c(!0),g(z,null,E(e.backpack,(o,S)=>(c(),g("div",{class:N(["items",{choose:o.isChoose}]),onClick:r=>a.itemChoose(o,S)},[f("p",se,[o.type==="2"?(c(),l(_,{key:0,type:"wx-attacker1"})):p("",!0),o.type==="3"?(c(),l(_,{key:1,type:"wx-clothes"})):p("",!0),o.type==="4"?(c(),l(_,{key:2,type:"wx-jiezhi1"})):p("",!0),y(" "+d(o.name),1)]),f("p",null,[(c(!0),g(z,null,E(o.attr,r=>(c(),g("span",ae,[oe,f("span",null,d(r.nameText)+": "+d(r.desc),1)]))),256))]),f("p",ne,[o.status==="1"?(c(),l(u,{key:0,type:"primary",onClick:r=>a.useItem(o)},{default:m(()=>[y(d(e.$t("use")),1)]),_:2},1032,["onClick"])):p("",!0),o.status==="2"?(c(),l(u,{key:1,type:"primary",onClick:r=>a.equipItem(o)},{default:m(()=>[y(d(e.$t("equip")),1)]),_:2},1032,["onClick"])):p("",!0),o.status==="2"?(c(),l(u,{key:2,type:"primary",style:{"margin-left":"10px"},onClick:r=>a.dissolveItem(o)},{default:m(()=>[y(d(e.$t("dissolve")),1)]),_:2},1032,["onClick"])):p("",!0),o.status==="21"?(c(),l(u,{key:3,type:"text",disabled:""},{default:m(()=>[ce]),_:1})):p("",!0),o.status==="11"?(c(),l(u,{key:4,type:"primary",disabled:""},{default:m(()=>[y(d(e.$t("used")),1)]),_:1})):p("",!0),o.status==="21"?(c(),l(u,{key:5,type:"primary",style:{"margin-left":"5px"},onClick:r=>a.unEquipItem(o)},{default:m(()=>[y(d(e.$t("equiped")),1)]),_:2},1032,["onClick"])):p("",!0)])],10,te))),256)),e.backpack.length===0?(c(),l(T,{key:0,title:e.$t("noItem")},{icon:m(()=>[]),_:1},8,["title"])):p("",!0)])])}const de=j(W,[["render",ie],["__scopeId","data-v-daee3d7a"]]);export{de as default};
//# sourceMappingURL=Backpack-DsHEwXdU.js.map
